groups:
  - name: docker_container_alerts
    rules:
      - alert: DockerContainerHighMemory
        # expr: container_memory_usage_bytes{image=~".*nginx.*"} > 134217728          
        expr: container_memory_usage_bytes{name=~"my-app_my-app.*"}   > 134217728   #128 МБ
        for: 10s
        labels:
          severity: warning
          alert_type: docker_memory
        annotations:
          summary: "Docker контейнер {{ $labels.name }} использует >128 МБ"
          description: |
            Контейнер: {{ $labels.name }}
            Образ: {{ $labels.image }}
            Память: >128 МБ
            Хост: {{ $labels.instance }}